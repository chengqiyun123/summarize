单页 Web 应用 (single-page application 简称为 SPA) 是一种特殊的 Web 应用。它将所有的活动局限于一个Web页面中，仅在该Web页面初始化时加载相应的HTML、JavaScript 和 CSS。一旦页面加载完成了，SPA不会因为用户的操作而进行页面的重新加载或跳转。取而代之的是利用 JavaScript 动态的变换HTML的内容，从而实现UI与用户的交互。由于避免了页面的重新加载，SPA 可以提供较为流畅的用户体验。得益于ajax，我们可以实现无跳转刷新，又多亏了浏览器的histroy机制，我们用hash的变化从而可以实现推动界面变化。从而模拟元素客户端的单页面切换效果：

SPA被人追捧是有道理的，但是它也有不足之处。当然任何东西都有两面性，以下是卤煮总结的一些目前SPA的优缺点：

> 优点：

1.无刷新界面，给用户体验原生的应用感觉

2.节省原生（android和ios）app开发成本

3.提高发布效率，无需每次安装更新包。这个对于ios开发人员来说印象尤其深吧。

4.容易借助其他知名平台更有利于营销和推广

5.符合web2.0的趋势

> 缺点：

1.效果和性能确实和原生的有较大差距

2.各个浏览器的版本兼容性不一样

3.业务随着代码量增加而增加，不利于首屏优化

4.某些平台对hash有偏见，有些甚至不支持pushstate。（你懂的）

5.不利于搜索引擎抓取

> 实现原理

实现SPA的方法有很多，终归一种遵循一种原则，界面无刷新。如果要实现原生应用中类似许多不同页面切换的效果，我们采用的是div切换显示和隐藏。而驱动div显示隐藏的方式有很多种

1.监听地址栏中hash变化驱动界面变化

2.用pushsate记录浏览器的历史，驱动界面发送变化

3.直接在界面用普通事件驱动界面变化

前两种方式较为普遍，因为它们的变化记录浏览器会保存在history中，可以通过回退/前进按钮找回，或者history对象中的方法控制。最后一种方法是用普通事件驱动的，没有改变浏览器的history对象，所以一旦用户按了返回按钮将会退到浏览器的主界面。所以，一般采用前两种方式。值得一提的是，在不支持hash监听和pushsate变化的浏览器中可以考虑用延时函数，不停得去监听浏览器地址栏中url发生的变化，从而驱动界面变化。

#### hash

- 依赖
- 事件 onhashchange

#### history

- 依赖
- 事件：onpopstate (es5新增的特性)
- 允许手动向浏览器的记录栈里添加/修改记录
- 函数：pushState() 向浏览器追加一条记录
    三个参数：追加记录需要携带的数据{}, 跳转路径的title'', 要跳转的路径
- 函数：replaceState 修改记录